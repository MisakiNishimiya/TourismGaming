<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2c3e50">
    <meta name="description" content="Pantukan Tourism - A Refined Escape in Davao de Oro">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Pantukan">
    
    <title>Pantukan - Luxury Tourism Experience</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%232c3e50' width='100' height='100'/><text x='50' y='60' text-anchor='middle' font-size='48' fill='%23c9a961' font-family='serif'>P</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%232c3e50' width='100' height='100'/><text x='50' y='60' text-anchor='middle' font-size='48' fill='%23c9a961' font-family='serif'>P</text></svg>">
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Garamond', 'Georgia', serif;
        }
    </style>
</head>
<body>
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(reg => console.log('Service Worker registered'))
                .catch(err => console.error('SW registration failed', err));
        }

        // Check if user is already logged in and redirect immediately
        const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
        
        if (currentUser.email && currentUser.role) {
            // User is logged in, redirect to appropriate dashboard
            if (currentUser.role === 'host') {
                window.location.replace('host-dashboard.html');
            } else {
                window.location.replace('customer-dashboard.html');
            }
        } else {
            // No user logged in, redirect to login page
            window.location.replace('login.html');
        }
    </script>
</body>
</html>